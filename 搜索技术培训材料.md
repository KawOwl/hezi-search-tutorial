# æœç´¢æŠ€æœ¯åŸ¹è®­ææ–™

---

## ç¬¬1é¡µï¼šæœç´¢è¿‡ç¨‹æ¦‚è§ˆ

### ğŸ” **æœç´¢ç³»ç»Ÿæ•´ä½“æ¶æ„**

```
ç”¨æˆ·è¾“å…¥ â†’ é¢„å¤„ç† â†’ æŸ¥è¯¢ç†è§£ â†’ å¬å› â†’ æ’åº â†’ ç»“æœè¿”å›
```

### **1. é¢„å¤„ç†é˜¶æ®µ**
- **è¾“å…¥è¿‡æ»¤**ï¼šå»é™¤ç¦ç”¨è¯ã€ç‰¹æ®Šå­—ç¬¦ã€æ‹¼éŸ³è¯†åˆ«
Â  - *ç¤ºä¾‹*ï¼š`"appleè‹¹æœæ‰‹æœºï¼ï¼ï¼"` â†’ `"appleè‹¹æœæ‰‹æœº"`
- **åˆ†è¯å¤„ç†**ï¼šä½¿ç”¨åŠ¨æ€è¯å…¸è¿›è¡Œåˆ†è¯ï¼Œæ”¯æŒæ–°è¯è‡ªåŠ¨è¯†åˆ«
Â  - *ç¤ºä¾‹*ï¼š`"è‹¹æœæ‰‹æœº"` â†’ `["è‹¹æœ", "æ‰‹æœº"]`
- **æŸ¥è¯¢è§„èŒƒåŒ–**ï¼šå»é™¤æ‹¬å·å†…å®¹ã€æ ‡å‡†åŒ–è¾“å…¥æ ¼å¼
Â  - *ç¤ºä¾‹*ï¼š`"iPhone 15ï¼ˆPro Maxç‰ˆæœ¬ï¼‰"` â†’ `"iPhone 15"`

### **2. æŸ¥è¯¢ç†è§£é˜¶æ®µ**
- **å‘½åå®ä½“è¯†åˆ«**ï¼šè¯†åˆ«å“ç‰Œã€ç±»ç›®ã€å±æ€§ã€æ ‡ç­¾ç­‰å®ä½“
Â  - *ç¤ºä¾‹*ï¼š`"è‹¹æœæ‰‹æœº"` â†’ å“ç‰Œ:`"è‹¹æœ"`, ç±»ç›®:`"æ‰‹æœº"`
- **ç²¾å‡†åŒ¹é…**ï¼šç›´æ¥åŒ¹é…ç³»ç»Ÿä¸­å·²æœ‰çš„å“ç‰Œå’Œç±»ç›®
Â  - *ç¤ºä¾‹*ï¼š`"åä¸º"` â†’ ç²¾ç¡®åŒ¹é…åˆ°å“ç‰Œåº“ä¸­çš„`brandId: "huawei"`
- **åŒä¹‰è¯æ‰©å±•**ï¼šä½¿ç”¨åŒä¹‰è¯åº“æ‰©å±•æœªç›´æ¥åŒ¹é…çš„ç±»ç›®
Â  - *ç¤ºä¾‹*ï¼š`"ç¬”è®°æœ¬"` â†’ æ‰©å±•ä¸º`["ç¬”è®°æœ¬ç”µè„‘", "ä¾¿æºå¼ç”µè„‘", "laptop"]`
- **å‘é‡æœç´¢æ‰©å±•**ï¼šåŸºäºè¯­ä¹‰å‘é‡è¿›è¡Œå“ç‰Œå’Œç±»ç›®æ‰©å±•
Â  - *ç¤ºä¾‹*ï¼š`"æ¸¸æˆæœ¬"` â†’ è¯­ä¹‰ç›¸ä¼¼:`["ç”µç«ç¬”è®°æœ¬", "é«˜æ€§èƒ½ç¬”è®°æœ¬"]`ï¼Œç›¸ä¼¼åº¦:`0.85`

### **3. è¯„åˆ†ä¸å¬å›é˜¶æ®µ**
- **å¤šå› å­è”åˆè¯„åˆ†**ï¼šç»¼åˆè€ƒè™‘å®ä½“å…³ç³»ã€ç”¨æˆ·åå¥½ã€å¹³å°çƒ­åº¦
Â  - *ç¤ºä¾‹*ï¼š`"è‹¹æœæ‰‹æœº"` â†’ å“ç‰Œæƒé‡:`2.0` Ã— ç±»ç›®æƒé‡:`1.5` = è”åˆè¯„åˆ†:`3.5`
- **å¾—åˆ†å½’ä¸€åŒ–**ï¼šä½¿ç”¨å¯¹æ•°ç¼©æ”¾ç­‰æ–¹æ³•å½’ä¸€åŒ–ä¸åŒç»´åº¦çš„åˆ†æ•°
Â  - *ç¤ºä¾‹*ï¼šé”€é‡`10000`ä»¶ â†’ å½’ä¸€åŒ–å:`0.85`åˆ†ï¼ˆ0-1åŒºé—´ï¼‰
- **ESç²—æ’å¬å›**ï¼šä½¿ç”¨BM25ç®—æ³•ç»“åˆä¸šåŠ¡æƒé‡è¿›è¡Œåˆæ­¥å¬å›
Â  - *ç¤ºä¾‹*ï¼šBM25è¯„åˆ†:`12.5` + è¯­ä¹‰å¢å¼º:`3.2` + è´¨é‡è¯„åˆ†:`1.8` = æ€»åˆ†:`17.5`

### **4. ç²¾æ’é˜¶æ®µ**
- **ä¸šåŠ¡æ¨¡å‹ç²¾æ’**ï¼šç»¼åˆBM25ã€è¯­ä¹‰å¢å¼ºã€å•†å“è´¨é‡ç­‰å¤šç»´åº¦è¯„åˆ†
Â  - *ç¤ºä¾‹æ’åº*ï¼š
Â  Â  - å•†å“Aï¼šESè¯„åˆ†`17.5` + å“ç‰ŒåŠ æƒ`2.0` + é”€é‡åŠ æƒ`1.2` = `20.7`åˆ†
Â  Â  - å•†å“Bï¼šESè¯„åˆ†`15.8` + å“ç‰ŒåŠ æƒ`1.5` + é”€é‡åŠ æƒ`2.8` = `20.1`åˆ†
Â  Â  - æœ€ç»ˆæ’åºï¼šå•†å“A > å•†å“B
- **åˆ†é¡µè¿”å›**ï¼šæ ¹æ®ç”¨æˆ·éœ€æ±‚è¿”å›ç›¸åº”é¡µç çš„ç»“æœ
Â  - *ç¤ºä¾‹*ï¼šç”¨æˆ·è¯·æ±‚ç¬¬2é¡µï¼Œæ¯é¡µ20æ¡ â†’ è¿”å›ç¬¬21-40æ¡ç»“æœ

### **å…³é”®ç»„ä»¶**
- **Elasticsearch**ï¼šæ ¸å¿ƒæœç´¢å¼•æ“ï¼Œè´Ÿè´£å€’æ’ç´¢å¼•å’ŒBM25è¯„åˆ†
Â  - *ä½œç”¨*ï¼šå­˜å‚¨å•†å“ç´¢å¼•ï¼Œæ‰§è¡Œå…¨æ–‡æœç´¢ï¼Œè¿”å›ç›¸å…³æ€§è¯„åˆ†
- **Prisma ORM**ï¼šæ•°æ®åº“æ“ä½œï¼Œç®¡ç†å•†å“ã€å“ç‰Œã€ç±»ç›®ç­‰åŸºç¡€æ•°æ®
Â  - *ä½œç”¨*ï¼šæŸ¥è¯¢å“ç‰Œä¿¡æ¯ã€ç±»ç›®å±‚çº§ã€å•†å“å±æ€§ç­‰ç»“æ„åŒ–æ•°æ®
- **ç¼“å­˜ç³»ç»Ÿ**ï¼šå¤šå±‚ç¼“å­˜ä¼˜åŒ–æ€§èƒ½ï¼ˆæœç´¢ç¼“å­˜ã€æ’åºç¼“å­˜ã€å®ä½“ç¼“å­˜ï¼‰
Â  - *ç¤ºä¾‹*ï¼šçƒ­é—¨æœç´¢`"iPhone"`ç»“æœç¼“å­˜5åˆ†é’Ÿï¼Œé¿å…é‡å¤è®¡ç®—
- **æ—¥å¿—ç³»ç»Ÿ**ï¼šå®Œæ•´çš„æœç´¢æ—¥å¿—è®°å½•å’Œæ€§èƒ½ç›‘æ§
Â  - *è®°å½•å†…å®¹*ï¼šæœç´¢è¯ã€å“åº”æ—¶é—´ã€å¬å›æ•°é‡ã€ç‚¹å‡»ç‡ç­‰æŒ‡æ ‡

### ğŸ’¡ **å®Œæ•´æœç´¢ç¤ºä¾‹æµç¨‹**

**ç”¨æˆ·è¾“å…¥**: `"åä¸ºç¬”è®°æœ¬ç”µè„‘"`

1. **é¢„å¤„ç†**: `"åä¸ºç¬”è®°æœ¬ç”µè„‘"` â†’ `["åä¸º", "ç¬”è®°æœ¬ç”µè„‘"]`
2. **å®ä½“è¯†åˆ«**: å“ç‰Œ=`"åä¸º"`, ç±»ç›®=`"ç¬”è®°æœ¬ç”µè„‘"`
3. **è¯„åˆ†è®¡ç®—**: å“ç‰ŒåŒ¹é…åº¦`2.0` + ç±»ç›®åŒ¹é…åº¦`1.5` + BM25è¯„åˆ†`8.3`
4. **å¬å›ç»“æœ**: 300ä»¶ç›¸å…³å•†å“ï¼ˆKå€çª—å£æ‰©å±•ï¼‰
5. **ç²¾æ’è¾“å‡º**: æŒ‰ç»¼åˆè¯„åˆ†æ’åºï¼Œè¿”å›å‰20ä»¶å•†å“
6. **å“åº”æ—¶é—´**: æ€»è€—æ—¶`120ms`ï¼ˆESæŸ¥è¯¢`80ms` + ä¸šåŠ¡é€»è¾‘`40ms`ï¼‰

---

## ç¬¬2é¡µï¼šæœç´¢è¯„åˆ†ä½“ç³»

### ğŸ¯ **è¯„åˆ†ä½“ç³»æ¶æ„**

```
æœ€ç»ˆè¯„åˆ† = BM25è¯„åˆ† Ã— æƒé‡é…ç½® + è¯­ä¹‰å¢å¼ºè¯„åˆ† + å•†å“è´¨é‡è¯„åˆ† + å“ç‰Œæå‡è¯„åˆ†
```

### **1. BM25åŸºç¡€è¯„åˆ†**
- **ç®—æ³•åŸç†**ï¼šTF-IDFçš„æ”¹è¿›ç‰ˆæœ¬ï¼Œè€ƒè™‘è¯é¢‘é¥±å’Œåº¦
- **å½’ä¸€åŒ–å¤„ç†**ï¼šä½¿ç”¨å¯¹æ•°ç¼©æ”¾é¿å…é•¿å°¾æ•ˆåº”
```typescript
// TitleBM25å½’ä¸€åŒ–è„šæœ¬
double total = Math.log1p(_score/k) / Math.log1p(xmax/k);
return total * weight;
```

### **2. è¯­ä¹‰å¢å¼ºè¯„åˆ† (SemanticEnhancement)**
**æƒé‡åˆ†å¸ƒ**ï¼š
- **å“ç‰ŒåŒ¹é…**ï¼šæƒé‡2.0ï¼Œç²¾ç¡®åŒ¹é…å“ç‰Œåç§°
- **ç±»ç›®åŒ¹é…**ï¼šæƒé‡1.5ï¼Œå‰å°ç±»ç›®å’Œåå°ç±»ç›®
- **è§„æ ¼åŒ¹é…**ï¼šæƒé‡1.0ï¼Œäº§å“è§„æ ¼å’Œå±æ€§

**è®¡ç®—å…¬å¼**ï¼š
```painless
total = brand_score * brand_weight + 
Â  Â  Â  Â  catF_score * category_weight + 
Â  Â  Â  Â  catR_score * category_weight
```

### **3. å•†å“è´¨é‡è¯„åˆ† (ProductQuality)**
**é”€å”®æ•°æ®æƒé‡åˆ†å¸ƒ**ï¼š
- **è¿‘30å¤©é”€é‡**ï¼š60%æƒé‡ï¼ˆåæ˜ å½“å‰çƒ­åº¦ï¼‰
- **è¿‘365å¤©é”€é‡**ï¼š30%æƒé‡ï¼ˆåæ˜ ç¨³å®šæ€§ï¼‰
- **å†å²æ€»é”€é‡**ï¼š10%æƒé‡ï¼ˆåæ˜ ç»å…¸ç¨‹åº¦ï¼‰

**è®¡ç®—å…¬å¼**ï¼š
```typescript
skuScore = (sku30 * 0.6) + (sku365 * 0.3) + (skuTotal * 0.1)
normalizedScore = Math.log1p(skuScore/k) / Math.log1p(xmax/k)
```

### **4. å“ç‰Œæå‡è¯„åˆ† (OriginalBrandBoost)**
**åº—é“ºä¿¡èª‰è¯„åˆ†**ï¼š
- **å®˜æ–¹åº—é“º**ï¼š+0.5åˆ†
- **æ——èˆ°åº—é“º**ï¼š+0.2åˆ†
- **å“ç‰ŒåŒ¹é…**ï¼š+1.0åˆ†ï¼ˆåº—é“ºååŒ…å«æœç´¢å“ç‰Œï¼‰

### **5. ä¾›åº”å•†æ˜Ÿçº§è¯„åˆ† (VenderStarLevel)**
- **1-5æ˜Ÿè¯„çº§**ï¼šç›´æ¥ä½¿ç”¨ä¾›åº”å•†æ˜Ÿçº§ä½œä¸ºæƒé‡
- **ä¼˜è´¨æ ‡ç­¾**ï¼šå¸¦æœ‰"premium"æ ‡ç­¾çš„å•†å“é¢å¤–åŠ æƒ

### **6. ä¸šåŠ¡æƒé‡è¯„åˆ† (BusinessWeight)**
**æµ‹è¯•æ¨¡å¼æƒé‡**ï¼š
```typescript
testWeight.brand + testWeight.product + testWeight.shop + 
testWeight.vender + testWeight.categoryFront + testWeight.categoryRaw
```

**æ­£å¼æ¨¡å¼æƒé‡**ï¼š
```typescript
formalWeight.brand + formalWeight.product + formalWeight.shop + 
formalWeight.vender + formalWeight.categoryFront + formalWeight.categoryRaw
```

---

## ç¬¬3é¡µï¼šæœç´¢ç²—æ’å’Œç²¾æ’

### âš¡ **ç²—æ’é˜¶æ®µ (Elasticsearchå±‚é¢)**

### **1. Function ScoreæŸ¥è¯¢**
```typescript
{
Â  function_score: {
Â  Â  query: { /* BM25åŸºç¡€æŸ¥è¯¢ */ },
Â  Â  functions: [
Â  Â  Â  { script_score: { script: semanticEnhancementScript } },
Â  Â  Â  { script_score: { script: originalBrandBoostScript } },
Â  Â  Â  { script_score: { script: productQualityScoreScript } },
Â  Â  Â  { script_score: { script: titleBM25NormalizerScript } },
Â  Â  Â  { script_score: { script: businessWeightScript } }
Â  Â  ],
Â  Â  score_mode: "sum", Â  Â  // è¯„åˆ†åˆå¹¶æ–¹å¼ï¼šç›¸åŠ 
Â  Â  boost_mode: "replace" Â // æ›¿æ¢åŸå§‹BM25è¯„åˆ†
Â  }
}
```

### **2. ç²—æ’å¬å›ç­–ç•¥**
- **å¬å›çª—å£**ï¼šä½¿ç”¨Kå€æ‰©å±•çª—å£ï¼ˆé»˜è®¤K=30ï¼‰
- **åˆ†é¡µä¼˜åŒ–**ï¼š`from: (page-1) * size * K`ï¼Œ`size: pageSize * K`
- **è¿‡æ»¤æ¡ä»¶**ï¼šå“ç‰Œã€ç±»ç›®ã€ä»·æ ¼ã€åº“å­˜ç­‰ä¸šåŠ¡è¿‡æ»¤

### **3. SPU/SKUå¤„ç†**
**SPUæ¨¡å¼**ï¼š
- ä½¿ç”¨`collapse`åŠŸèƒ½æŒ‰`spuId`å»é‡
- èšåˆç»Ÿè®¡ï¼š`distinct_spu_count`è·å–çœŸå®SPUæ•°é‡
- å±æ€§èšåˆï¼šæ”¶é›†å¯ç­›é€‰çš„å•†å“å±æ€§

**SKUæ¨¡å¼**ï¼š
- ç›´æ¥è¿”å›æ‰€æœ‰SKUç»“æœ
- æ”¯æŒåŒä¸€SPUä¸‹å¤šä¸ªSKUçš„å±•ç¤º

---

### ğŸ¯ **ç²¾æ’é˜¶æ®µ (åº”ç”¨å±‚é¢)**

### **1. æ’åºå™¨æ¶æ„**
```typescript
const sorterMap = {
Â  first: byScore(), Â  Â  Â  Â  Â  // ESè¯„åˆ†æ’åº
Â  OBB: byOriginalBrandBoost(), // å“ç‰Œæå‡æ’åº
Â  SEM: bySemanticEnhancement(), // è¯­ä¹‰å¢å¼ºæ’åº
Â  PQ: byProductQuality(), Â  Â  Â // å•†å“è´¨é‡æ’åº
Â  VSL: byVenderStarLevel(), Â  Â // ä¾›åº”å•†æ˜Ÿçº§æ’åº
Â  PR: byPremium() Â  Â  Â  Â  Â  Â  // ä¼˜è´¨æ ‡ç­¾æ’åº
}
```

### **2. æ’åºé¡ºåºé…ç½®**
**é»˜è®¤æ’åº**ï¼š`"first,OBB,SEM,PQ,VSL,PR"`
- **first**ï¼šESç»¼åˆè¯„åˆ†ï¼ˆä¸»æ’åºï¼‰
- **OBB**ï¼šå“ç‰Œåº—é“ºæƒé‡
- **SEM**ï¼šè¯­ä¹‰åŒ¹é…åº¦
- **PQ**ï¼šå•†å“é”€å”®è´¨é‡
- **VSL**ï¼šä¾›åº”å•†ä¿¡èª‰
- **PR**ï¼šä¼˜è´¨å•†å“æ ‡è¯†

### **3. å¤šçº§æ’åºé€»è¾‘**
```typescript
function sorter(sortType, products, sorterOrder) {
Â  const order = sorterOrder.split(',');
Â  const comparators = order.map(key => sorterMap[key]);
Â  
Â  return products.sort((a, b) => {
Â  Â  for (const comparator of comparators) {
Â  Â  Â  const result = comparator(a, b);
Â  Â  Â  if (result !== 0) return result;
Â  Â  }
Â  Â  return 0;
Â  });
}
```

### **4. åˆ†ç»„æ’åºç­–ç•¥**
```typescript
// è´§æ¶å¼æ’åºï¼šå…ˆæŒ‰å“ç‰Œåˆ†ç»„ï¼Œç»„å†…æŒ‰è´¨é‡æ’åº
function divideGroup(list, compareFn, groupSize) {
Â  const groups = [];
Â  for (let i = 0; i < list.length; i += groupSize) {
Â  Â  groups.push(list.slice(i, i + groupSize));
Â  }
Â  return groups.map(group => group.sort(compareFn));
}
```

---

## ç¬¬4é¡µï¼šæœç´¢è®¾ç½®è§£é‡ŠåŠè°ƒæ•´æ–¹æ³•

### âš™ï¸ **æ ¸å¿ƒé…ç½®å‚æ•°**

### **1. æƒé‡é…ç½® (Weight Configuration)**

#### **è¯­ä¹‰å¢å¼ºæƒé‡**
```typescript
semanticEnhancementScriptBrandWeight: 2.0 Â  Â  Â // å“ç‰ŒåŒ¹é…æƒé‡
semanticEnhancementScriptCategoryWeight: 1.5 Â  // ç±»ç›®åŒ¹é…æƒé‡ Â 
semanticEnhancementScriptResultWeight: 5.0 Â  Â  // è¯­ä¹‰å¢å¼ºæ€»æƒé‡
```
**è°ƒæ•´å»ºè®®**ï¼š
- å“ç‰Œå¯¼å‘å¹³å°ï¼šæé«˜`brandWeight`åˆ°3.0
- ç±»ç›®ä¸°å¯Œå¹³å°ï¼šæé«˜`categoryWeight`åˆ°2.0
- é™ä½è¯­ä¹‰å¹²æ‰°ï¼šå‡å°‘`resultWeight`åˆ°3.0

#### **å…¶ä»–è„šæœ¬æƒé‡**
```typescript
titleBM25NormalizerScriptResultWeight: 5.0 Â  Â  // æ ‡é¢˜BM25æƒé‡
originalBrandBoostScriptResultWeight: 1.0 Â  Â  Â // å“ç‰Œåº—é“ºæƒé‡
productQualityScoreScriptResultWeight: 1.0 Â  Â  // å•†å“è´¨é‡æƒé‡
productQualityCoefficient: 1.0 Â  Â  Â  Â  Â  Â  Â  Â  // è´¨é‡ç³»æ•°
categoryCoefficient: 1.0 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ç±»ç›®ç³»æ•°
```

### **2. å½’ä¸€åŒ–å‚æ•° (Normalization Parameters)**

#### **å¯¹æ•°ç¼©æ”¾é…ç½®**
```typescript
// æ ‡é¢˜BM25å½’ä¸€åŒ–
titleBM25Normalizer: { xmax: 100, k: 10 }
// è¯­ä¹‰å¢å¼ºå½’ä¸€åŒ– Â 
semanticEnhancement: { xmax: 50, k: 5 }
// å•†å“è´¨é‡å½’ä¸€åŒ–
productQualityScore: { xmax: 1000, k: 100 }
```

**å‚æ•°è¯´æ˜**ï¼š
- **xmax**ï¼šæœ€å¤§æœŸæœ›å€¼ï¼Œç”¨äºå½’ä¸€åŒ–ä¸Šé™
- **k**ï¼šç¼©æ”¾å› å­ï¼Œæ§åˆ¶æ›²çº¿é™¡å³­ç¨‹åº¦
- **å…¬å¼**ï¼š`Math.log1p(score/k) / Math.log1p(xmax/k)`

**è°ƒæ•´ç­–ç•¥**ï¼š
- é™ä½kå€¼ï¼šå¢åŠ ä½åˆ†å•†å“çš„æƒé‡
- æé«˜xmaxï¼šé™ä½é«˜åˆ†å•†å“çš„ä¼˜åŠ¿
- å¹³å°æ•°æ®ç‰¹ç‚¹ï¼šæ ¹æ®å®é™…åˆ†æ•°åˆ†å¸ƒè°ƒæ•´

### **3. å¬å›é…ç½® (Recall Configuration)**

```typescript
esRecallSize: 300 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // ESå¬å›çª—å£å¤§å°
cardinalityPrecisionThreshold: 40000 Â  Â  Â  // åŸºæ•°ç»Ÿè®¡ç²¾åº¦é˜ˆå€¼
sorterOrder: "first,OBB,SEM,PQ,VSL,PR" Â  Â // æ’åºä¼˜å…ˆçº§
```

**è°ƒæ•´æŒ‡å—**ï¼š
- **å°æµé‡å¹³å°**ï¼š`esRecallSize: 150`å‡å°‘è®¡ç®—å¼€é”€
- **å¤§æµé‡å¹³å°**ï¼š`esRecallSize: 500`æé«˜æ’åºç²¾åº¦
- **å“ç‰Œä¸ºä¸»**ï¼šè°ƒæ•´sorterOrderä¸º`"first,OBB,PQ,SEM,VSL,PR"`
- **é”€é‡ä¸ºä¸»**ï¼šè°ƒæ•´sorterOrderä¸º`"first,PQ,OBB,SEM,VSL,PR"`

### **4. ä¸šåŠ¡æƒé‡è°ƒæ•´ (Business Weight Tuning)**

#### **å®ä½“æƒé‡è®¾ç½®**
åœ¨æ•°æ®åº“ä¸­æ¯ä¸ªå®ä½“éƒ½æœ‰æµ‹è¯•æƒé‡å’Œæ­£å¼æƒé‡ï¼š
```sql
-- å“ç‰Œæƒé‡è°ƒæ•´
UPDATE Brand SET testValue = 2.0 WHERE brandId = 'target_brand';
-- ç±»ç›®æƒé‡è°ƒæ•´ Â 
UPDATE CategoryFront SET testValue = 1.5 WHERE categoryId = 'target_category';
-- å•†å“æƒé‡è°ƒæ•´
UPDATE Product SET testWeight_product = 1.8 WHERE productId = 'target_product';
```

#### **æƒé‡è°ƒæ•´å·¥å…·**
é€šè¿‡ç®¡ç†ç•Œé¢è°ƒæ•´ï¼š
- **æœç´¢è®¾ç½®é¡µé¢**ï¼š`/project/[code]/search/setting`
- **å®ä½“åº“é¡µé¢**ï¼š`/project/[code]/entityLibrary`
- **æƒé‡èŒƒå›´**ï¼š0.1 - 5.0

### **5. æ€§èƒ½ä¼˜åŒ–é…ç½®**

#### **ç¼“å­˜è®¾ç½®**
```typescript
searchCache: TTL 5åˆ†é’Ÿ Â  Â  Â // æœç´¢ç»“æœç¼“å­˜
sortCache: TTL 10åˆ†é’Ÿ Â  Â  Â  // æ’åºç»“æœç¼“å­˜ Â 
esCache: TTL 1åˆ†é’Ÿ Â  Â  Â  Â  Â // ESæŸ¥è¯¢ç¼“å­˜
```

#### **åˆ†é¡µä¼˜åŒ–**
```typescript
// å¤§åˆ†é¡µä¼˜åŒ–
if (page > 100) {
Â  useScrollSearch = true;
Â  scrollTTL = "5m";
}
```

### **6. æµ‹è¯•è°ƒæ•´ç¤ºä¾‹**

#### **æƒé‡å¯¹æ¯”æµ‹è¯•**
```typescript
// æµ‹è¯•ç»„é…ç½®
const testConfig = {
Â  semanticEnhancementWeight: 3.0, Â // vs åŸºçº¿5.0
Â  brandBoostWeight: 2.0, Â  Â  Â  Â  Â  // vs åŸºçº¿1.0
Â  qualityWeight: 0.5 Â  Â  Â  Â  Â  Â  Â  // vs åŸºçº¿1.0
};
```

#### **æ’åºç­–ç•¥æµ‹è¯•**
- **ç­–ç•¥A**ï¼š`"first,SEM,OBB,PQ,VSL,PR"` (è¯­ä¹‰ä¼˜å…ˆ)
- **ç­–ç•¥B**ï¼š`"first,PQ,OBB,SEM,VSL,PR"` (é”€é‡ä¼˜å…ˆ) Â 
- **ç­–ç•¥C**ï¼š`"first,OBB,SEM,PQ,VSL,PR"` (å“ç‰Œä¼˜å…ˆ)

